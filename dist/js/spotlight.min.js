/**
 * Spotlight.js v0.7.9
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';function d(a,b,c){a.classList[c?"add":"remove"](b)}function f(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(f(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&f(a,"transition","")}function h(a,b,c,e){k(!0,a,b,c,e)}function k(a,b,c,e,g){b[(a?"add":"remove")+"EventListener"](c,e,g||!1===g?g:!0)}function l(a,b){f(a,"display",b?"":"none")}function m(a,b){f(a,"visibility",b?"":"hidden")}
function n(a,b){f(a,"transition",b?"":"none")};var p="info theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),ca={info:1,page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var q=document.createElement("div");q.id="spotlight";q.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var da={},ea=document.createElement("video");function fa(a,b,c,e){if("node"!==e)for(var g=Object.keys(c),A=0,w;A<g.length;A++)if(w=g[A],3<w.length&&0===w.indexOf("src"))if("video"===e){var E=da[w];if(E){if(0<E){var Fa=c[w];break}}else if(ea.canPlayType("video/"+w.substring(3).replace("-","").toLowerCase())){da[w]=1;Fa=c[w];break}else da[w]=-1}else if(E=parseInt(w.substring(4),10))if(E=Math.abs(b-E),!hb||E<hb){var hb=E;Fa=c[w]}return Fa||c.src||c.href||a.src||a.href};var r={},ha=navigator.connection,ia=window.devicePixelRatio||1,t,u,ja,ka,v,la,ma,na,x,oa,pa,qa,y,z,B,C,D,F,ra,sa,G,ta,ua,va,wa,xa,ya,H,za,Aa,Ba,Ca,I,Da,Ea,Ga,Ha,J,K,L,Ia,M,Ja=document.createElement("img"),Ka,La,N,Ma=0,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,O,Va,P,Q,R,S,Wa,T,Xa;
function Ya(){function a(c){return r[c]=(q||document).getElementsByClassName("spl-"+c)[0]}if(!K){K=document.body;Ka=a("scene");La=a("header");N=a("footer");Na=a("title");Oa=a("description");Pa=a("button");Qa=a("prev");Ra=a("next");Ta=a("page");O=a("progress");Va=a("spinner");Ia=[a("pane")];U("close",Za);K[T="requestFullscreen"]||K[T="msRequestFullscreen"]||K[T="webkitRequestFullscreen"]||K[T="mozRequestFullscreen"]||(T="");T?(Xa=T.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Sa=U("fullscreen",$a)):p.pop();U("info",ab);U("autofit",V);U("zoom-in",bb);U("zoom-out",cb);U("theme",db);Ua=U("play",W);U("download",eb);h(Qa,"click",fb);h(Ra,"click",gb);var b=a("track");h(b,"mousedown",ib);h(b,"mousemove",jb);h(b,"mouseleave",kb);h(b,"mouseup",kb);h(b,"touchstart",ib,{passive:!1});h(b,"touchmove",jb,{passive:!0});h(b,"touchend",kb);h(Pa,"click",function(){Ca?Ca(B,F):Ba&&(location.href=Ba)})}}
function U(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);La.appendChild(c);return r[a]=c}function X(a,b){a=F[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}function lb(a){a?ba(M,lb):(n(Ka,Ha),f(M,"opacity",Ga?0:1),mb(Ea&&.8),J&&d(M,J,!0))}
function nb(a){L=Ia[a-1];M=L.firstChild;B=a;if(M)y&&V(),xa&&d(M,xa,!0),lb(!0),J&&d(M,J),Ga&&f(M,"opacity",1),Ea&&f(M,"transform",""),f(M,"visibility","visible"),Q&&(Ja.src=Q),H&&ob(R);else{var b=P.media,c=X("spinner",!0);if("video"===b)pb(c,!0),M=document.createElement("video"),M.onloadedmetadata=function(){M===this&&(M.onerror=null,M.width=M.videoWidth,M.height=M.videoHeight,qb(),pb(c),nb(a))},M.poster=F.poster,M.preload=Aa?"auto":"metadata",M.controls=X("controls",!0),M.autoplay=F.autoplay,M.h=
X("inline"),M.muted=X("muted"),M.src=P.src,L.appendChild(M);else{if("node"===b){M=P.src;"string"===typeof M&&(M=document.querySelector(M));M&&(M.g||(M.g=M.parentNode),qb(),L.appendChild(M),nb(a));return}pb(c,!0);M=document.createElement("img");M.onload=function(){M===this&&(M.onerror=null,pb(c),nb(a),qb())};M.src=P.src;L.appendChild(M)}M&&(c||f(M,"visibility","visible"),M.onerror=function(){M===this&&(rb(M),d(Va,"error",!0),pb(c))})}}function pb(a,b){a&&d(Va,"spin",b)}
function sb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function tb(){ub();M&&qb();if(T){var a=sb();d(Sa,"on",a);a||l(Sa,0<screen.availHeight-window.innerHeight)}}function ub(){v=q.clientWidth;la=q.clientHeight}function qb(){ma=M.clientWidth;na=M.clientHeight}function mb(a){f(M,"transform","translate(-50%, -50%) scale("+(a||x)+")")}function Y(a,b){f(L,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function vb(a,b,c){b?ba(Ka,function(){vb(a,!1,c)}):f(Ka,"transform","translateX("+(100*-a+(c||0))+"%)")}function wb(a){k(a,window,"keydown",xb);k(a,window,"wheel",yb);k(a,window,"resize",tb);k(a,window,"popstate",zb)}function zb(a){L&&a.state.spl&&Za(!0)}
function xb(a){if(L){var b=!1!==F["zoom-in"];switch(a.keyCode){case 8:b&&V();break;case 27:Za();break;case 32:H&&W();break;case 37:fb();break;case 39:gb();break;case 38:case 107:case 187:b&&bb();break;case 40:case 109:case 189:b&&cb();break;case 73:ab()}}}function yb(a){L&&!1!==F["zoom-in"]&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?cb():bb())}function W(a,b){("boolean"===typeof a?a:!R)===!R&&(R=R?clearTimeout(R):1,d(Ua,"on",R),b||ob(R))}
function ob(a){ta&&(ba(O,function(){f(O,"transition-duration","");f(O,"transform","")}),a&&(f(O,"transition-duration",Da+"s"),f(O,"transform","translateX(0)")));a&&(R=setTimeout(gb,1E3*Da))}function Z(){ya&&(Wa=Date.now()+2950,S||(d(q,"menu",!0),Ab(3E3)))}function Ab(a){S=setTimeout(function(){var b=Date.now();b>=Wa?(d(q,"menu"),S=0):Ab(Wa-b)},a)}function Bb(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),d(q,"menu")):Z()}
function ib(a){var b=a;b.stopPropagation();b.preventDefault();oa=!0;pa=!1;(b=a.touches)&&(b=b[0])&&(a=b);qa=ma*x<=v;ja=a.pageX;ka=a.pageY;n(L)}function kb(a){a.stopPropagation();if(oa){if(pa){if(qa&&pa){var b=(a=t<-(v/7)&&(B<C||G))||t>v/7&&(1<B||G);if(a||b)vb(B-1,!0,t/v*100),a&&gb()||b&&fb();t=0;Y()}n(L,!0)}else Bb();oa=!1}}
function jb(a){a.stopPropagation();if(oa){var b=a.touches;b&&(b=b[0])&&(a=b);b=(ma*x-v)/2;t-=ja-(ja=a.pageX);qa||(t>b?t=b:t<-b&&(t=-b),na*x>la&&(b=(na*x-la)/2,u-=ka-(ka=a.pageY),u>b?u=b:u<-b&&(u=-b)));pa=!0;Y(t,u)}else Z()}function $a(a){var b=sb();if("boolean"!==typeof a||a!==!!b)if(b)document[Xa]();else q[T]()}function db(a){"string"!==typeof a&&(a=z?"":za||"white");z!==a&&(z&&d(q,z),a&&d(q,a,!0),z=a)}
function V(a){"boolean"===typeof a&&(y=!a);y=1===x&&!y;d(M,"autofit",y);f(M,"transform","");x=1;u=t=0;qb();n(L);Y()}function bb(){var a=x/.65;50>=a&&(y&&V(),t/=.65,u/=.65,Y(t,u),Cb(a))}function cb(){var a=.65*x;y&&V();1<=a&&(1===a?t=u=0:(t*=.65,u*=.65),Y(t,u),Cb(a))}function Cb(a){x=a||1;mb()}function ab(){Ma=!Ma;m(N,Ma)}function eb(){var a=K,b=document.createElement("a"),c=M.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}
function Za(a){setTimeout(function(){K.removeChild(q);L=M=P=F=sa=D=ua=va=wa=Ca=null},200);d(K,"hide-scrollbars");d(q,"show");$a(!1);wb();history.go(!0===a?-1:-2);Q&&(Ja.src="");R&&W();M&&rb(M);S&&(S=clearTimeout(S));z&&db();I&&d(q,I);wa&&wa()}function rb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a);a.src=a.onerror=""}}function fb(a){a&&Z();if(1<C){if(1<B)return Db(B-1);if(G)return vb(C,!0),Db(C)}}
function gb(a){a&&Z();if(1<C){if(B<C)return Db(B+1);if(G)return vb(-1,!0),Db(1);R&&W()}}function Db(a){if(a!==B){R?(clearTimeout(R),ob()):Z();var b=a>B;B=a;Eb(b);return!0}}
function Fb(a){var b=D[B-1],c=b;F={};sa&&Object.assign(F,sa);Object.assign(F,c.dataset||c);ra=F.media;Ca=F.onclick;za=F.theme;I=F["class"];ya=X("autohide",!0);G=X("infinite");ta=X("progress",!0);H=X("autoslide");Aa=X("preload",!0);Ba=F.buttonHref;Da=H&&parseFloat(H)||7;z||za&&db(za);I&&d(q,I,!0);I&&ba(q);if(c=F.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<p.length;e++)F[p[e]]=!1;for(e=0;e<c.length;e++){var g=c[e].trim();"zoom"===g?F["zoom-in"]=F["zoom-out"]=!0:F[g]=!0}}c=F.animation;
Ea=Ga=Ha=!c;J=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)g=c[e].trim(),"scale"===g?Ea=!0:"fade"===g?Ga=!0:"slide"===g?Ha=!0:g&&(J=g);xa=F.fit;e=ha&&ha.downlink;c=Math.max(la,v)*ia;e&&1200*e<c&&(c=1200*e);var A;P={media:ra,src:fa(b,c,F,ra),title:X("title",b.alt||b.title||(A=b.firstElementChild)&&(A.alt||A.title))};Q&&(Ja.src=Q="");Aa&&a&&(b=D[B])&&(a=b.dataset||b,(A=a.media)&&"image"!==A||(Q=fa(b,c,a,A)));for(b=0;b<p.length;b++)a=p[b],l(r[a],X(a,ca[a]))}
function Eb(a){u=t=0;x=1;if(M)if(M.onerror)rb(M);else{var b=M;setTimeout(function(){b&&M!==b&&(rb(b),b=null)},650);lb();Y()}N&&m(N,!1);Fb(a);vb(B-1);d(Va,"error");nb(B);n(L);Y();a=P.title;var c=X("description"),e=X("button"),g=a||c||e;g&&(a&&(Na.firstChild.nodeValue=a),c&&(Oa.firstChild.nodeValue=c),e&&(Pa.firstChild.nodeValue=e),l(Na,a),l(Oa,c),l(Pa,e),f(N,"transform","all"===ya?"":"none"));ya||d(q,"menu",!0);m(N,Ma&&g);m(Qa,G||1<B);m(Ra,G||B<C);Ta.firstChild.nodeValue=1<C?B+" / "+C:"";va&&va(B,
F)};window.Spotlight={init:Ya,theme:db,fullscreen:$a,download:eb,autofit:V,next:gb,prev:fb,goto:Db,close:Za,zoom:Cb,menu:Bb,show:function(a,b,c){D=a;b&&(sa=b,ua=b.onshow,va=b.onchange,wa=b.onclose,c=c||b.index);a=c;if(C=D.length){K||Ya();ua&&ua(a);b=Ia[0];c=b.parentNode;for(var e=Ia.length;e<C;e++){var g=b.cloneNode(!1);f(g,"left",100*e+"%");c.appendChild(g);Ia[e]=g}L||(K.appendChild(q),ub());B=a||1;n(Ka);Eb(!0);T&&l(Sa,0<screen.availHeight-window.innerHeight);history.pushState({spl:1},"");history.pushState({spl:2},
"");n(q,!0);d(K,"hide-scrollbars",!0);d(q,"show",!0);wb(!0);ub();Z();H&&W(!0,!0)}},play:W,addControl:U,removeControl:function(a){var b=r[a];b&&(La.removeChild(b),r[a]=null)}};}).call(this);
